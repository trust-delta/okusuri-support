---
name: decision-assistant
description: 技術的意思決定や重要な判断を構造化して記録する。背景・理由・代替案を整理し、将来の参照価値が高い決定記録を生成する。
---

# Decision作成アシスタント

## 目的

プロジェクトにおける重要な決定（技術選定、アーキテクチャ変更、機能設計、プロセス変更など）を構造化して記録し、将来の意思決定の根拠を明確に残します。

## いつ使うか

以下のような場面で、このスキルを呼び出してください：

- **技術的決定**: 「Next.js 15に移行すべきか検討したい」
- **アーキテクチャ変更**: 「認証方式をどうするか決めたい」
- **機能設計**: 「グループ削除機能をどう実装するか」
- **ライブラリ選定**: 「フォーム管理にreact-hook-formを使うか」
- **プロセス変更**: 「テストカバレッジの目標を変更したい」
- **設計判断**: 「この問題に対する解決策を記録したい」

## スキルが行うこと

1. **対話形式で情報収集**
   - 背景・問題点のヒアリング
   - 決定内容の明確化
   - 代替案の洗い出し

2. **構造化された記録の生成**
   - 既存の決定記録スタイルを分析
   - プロジェクト固有のフォーマットに準拠
   - 利点・欠点・代替案を明確に記載

3. **適切な配置と命名**
   - `.context/decisions/YYYY-MM-DD-[topic].md` に出力
   - 日付は自動取得（JST）
   - トピック名はkebab-caseで命名

## 対話フロー

### ステップ1: 背景のヒアリング

「どのような背景でこの決定が必要になりましたか？」
- 現状の問題点
- なぜ今決定する必要があるのか
- 関連する文脈

### ステップ2: 決定内容の確認

「具体的にどのような決定を行いますか？」
- 採用する解決策
- 主要な決定事項

### ステップ3: 理由の整理

「この決定を選択した理由を教えてください」
- なぜこの案が最適なのか
- 技術的根拠
- ビジネス的根拠

### ステップ4: 代替案の検討

「他に検討した代替案はありますか？」
- 少なくとも2-3の代替案
- 各案のメリット・デメリット
- 却下理由

### ステップ5: リスクと影響の確認

「実装上のリスクや影響範囲はありますか？」
- 技術的考慮事項
- 影響を受けるコンポーネント
- リスクと軽減策

## 生成される決定記録の構成

プロジェクトのテンプレート（`.context/decisions/templates/decision-template.md`）に準拠して決定記録を生成します。

**主要セクション**:
- タイトル、日付、ステータス、決定者
- 背景（問題点と文脈）
- 決定（採用する解決策）
- 理由（なぜこの決定を選択したか）
- 利点（✅ で列挙）
- 欠点と対応策（❌ デメリット → 対応策）
- 代替案（却下理由を明記）
- 実装計画（技術的決定の場合）
- 関連ドキュメント
- 承認テーブル
- 更新履歴

詳細な構造は `.context/decisions/templates/decision-template.md` を参照してください。

## 既存決定記録の参照

このスキルは以下の既存決定記録を学習材料として参照します：

- `.context/decisions/2025-10-26-medication-statistics.md` (16KB) - 服薬統計機能の実装
- `.context/decisions/2025-10-26-prescription-management.md` (18KB) - 処方箋管理機能の導入
- `.context/decisions/2025-10-26-group-leave-delete.md` (14KB) - グループ脱退・削除機能
- `.context/decisions/2025-10-26-migrate-to-pnpm.md` (3.7KB) - pnpm移行
- `.context/decisions/2025-10-16-context-driven-development.md` (2.9KB) - コンテキスト駆動開発

これらのスタイル・構造・詳細度を参考に、一貫性のある決定記録を生成します。

## 関連コンテキスト

決定記録作成時に参照すべきプロジェクトドキュメント：

- `.context/project.md` - プロジェクト概要、技術スタック
- `.context/architecture.md` - アーキテクチャ全体像
- `.context/coding-style.md` - コーディング規約
- `.context/testing-strategy.md` - テスト戦略

## 注意事項

1. **既存決定の尊重**: 既存の決定記録と矛盾する場合は指摘する
2. **網羅的な検討**: 代替案は最低2つ以上提示する
3. **具体性**: 抽象的な記述ではなく、具体的な技術・実装に言及
4. **将来の自分への配慮**: 数ヶ月後に読んでも理解できる記述
5. **日本語**: すべて日本語で記述（コードを除く）

## 使用例

### 例1: 技術選定

```
ユーザー: 「フォーム管理ライブラリをreact-hook-formにするか検討したい」

アシスタント:
フォーム管理ライブラリの選定について決定記録を作成します。
いくつか質問させてください。

1. 現在のフォーム管理でどのような課題がありますか？
2. react-hook-form以外に検討したライブラリはありますか？
3. プロジェクトで重視する要件（型安全性、パフォーマンス等）は？

[対話を通じて情報収集]

決定記録を作成しました：
.context/decisions/2025-11-16-form-library-selection.md
```

### 例2: アーキテクチャ変更

```
ユーザー: 「認証をConvex Authに移行する決定を記録したい」

アシスタント:
認証方式の変更について決定記録を作成します。
現在の認証方式と移行の背景を教えてください。

[対話を通じて既存の実装を確認、代替案を検討]

決定記録を作成しました：
.context/decisions/2025-11-16-auth-migration-to-convex.md
```

## このスキルの利点

✅ **意思決定の質向上**: 代替案検討を強制し、見落としを防ぐ
✅ **知識の蓄積**: なぜその決定をしたか、将来の自分・チームが理解できる
✅ **一貫性**: プロジェクト全体で統一されたフォーマット
✅ **効率化**: 18KBの詳細な決定記録も対話形式で作成可能

## プロジェクト固有のルール（CLAUDE.md参照）

- `.context/decisions/` に記載された決定記録を尊重すること
- 決定記録で決定された技術選定や設計方針に従うこと
- 新たな技術的決定を行う場合は、決定記録として記録することを提案すること
