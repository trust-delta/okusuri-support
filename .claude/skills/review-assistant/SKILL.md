---
name: review-assistant
description: |
  コードの品質・セキュリティ・パフォーマンス・アクセシビリティをチェックする。コミットやPR作成の前にこのスキルでセルフレビューを行う。
  <example>
  - 「コードをレビューして」
  - 「PR作成前にチェックして」
  - 「セキュリティ・パフォーマンスを確認」
  </example>
---

# Review Assistant

PR前のセルフレビューを支援し、コード品質を向上させるスキル。

## 利用可能な機能

### 1. コード品質チェック
変更されたコードの品質をチェックします。

**使用例**:
- 「コードをレビューして」
- 「品質チェックをして」

**詳細**: [capabilities/code-quality.md](capabilities/code-quality.md)

---

### 2. セキュリティチェック
セキュリティリスクをチェックします。

**使用例**:
- 「セキュリティチェックして」
- 「脆弱性がないか確認」

**詳細**: [capabilities/security.md](capabilities/security.md)

---

### 3. パフォーマンスチェック
パフォーマンス問題をチェックします。

**使用例**:
- 「パフォーマンスをチェック」
- 「最適化できる箇所を確認」

**詳細**: [capabilities/performance.md](capabilities/performance.md)

---

### 4. 本番デプロイ前チェック
本番環境へのデプロイ前に確認すべき項目をチェックします。

**使用例**:
- 「デプロイ前チェックして」
- 「本番準備できてる？」
- 「リリース前の確認」

**詳細**: [capabilities/production-deploy.md](capabilities/production-deploy.md)

---

### 5. プライバシーチェック（医療アプリ向け）
医療情報を扱うアプリ特有のプライバシー要件をチェックします。

**使用例**:
- 「プライバシーチェックして」
- 「個人情報の取り扱いを確認」
- 「PHI の漏洩リスクを確認」

**詳細**: [capabilities/privacy.md](capabilities/privacy.md)

---

## 基本的な実行フロー

### 1. 変更内容の取得
```bash
git diff main...HEAD
git diff --staged
```

### 2. チェック項目の実行
- コード品質チェック
- セキュリティチェック
- パフォーマンスチェック
- 本番デプロイ前チェック（デプロイ前の場合）
- プライバシーチェック（医療情報を扱う場合）

### 3. 結果レポート
問題点と改善提案をレポート

---

## チェックリスト

### コード品質
- [ ] 型安全性（any型の使用なし）
- [ ] エラーハンドリング
- [ ] 命名規則の遵守
- [ ] コードの重複なし
- [ ] 適切なコメント

### セキュリティ
- [ ] 機密情報のハードコードなし
- [ ] 入力バリデーション
- [ ] 認証・認可チェック
- [ ] XSS対策
- [ ] SQLインジェクション対策

### パフォーマンス
- [ ] 不要な再レンダリングなし
- [ ] 適切なメモ化
- [ ] N+1問題なし
- [ ] 適切なインデックス

### 本番デプロイ前
- [ ] 認証ミドルウェアの保護範囲が適切
- [ ] セキュリティヘッダー設定済み
- [ ] エラー監視（Sentry等）設定済み
- [ ] 型チェック・Lintがパス
- [ ] npm脆弱性なし（high/critical）

### プライバシー（医療アプリ）
- [ ] エラー監視でPII送信無効化
- [ ] テキストマスキング有効
- [ ] ログに医療情報が含まれていない
- [ ] 所有権チェック実装済み

---

## 出力フォーマット

```markdown
## レビュー結果

### 概要
- 変更ファイル数: X
- 追加行数: +XXX
- 削除行数: -XXX

### 問題点

#### 🔴 Critical（即座に修正が必要）
- [ファイル:行] 問題の説明

#### 🟡 Warning（修正を推奨）
- [ファイル:行] 問題の説明

#### 🔵 Info（参考情報）
- [ファイル:行] 提案

### 良い点
- ✅ 良い点1
- ✅ 良い点2
```

---

## 注意事項

1. **自動ツールとの併用**: `npm run type-check` `npm run lint` も実行
2. **文脈の理解**: 変更の目的を理解してからレビュー
3. **建設的なフィードバック**: 問題点だけでなく改善案も提示

---

**最終更新**: 2025年11月30日
